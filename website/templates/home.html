{% extends "base.html" %} {% block title %}Home | Filipino Sign Language{% endblock %} {% block content
%}
<div class="d-flex flex-column" style="margin-bottom: 7rem;">
  <div style="position: sticky;
  top: 2.5rem;
  background-color: white;
  padding-bottom: 0.8rem;
  box-shadow: 0 4px 10px -10px #222;
  -webkit-box-shadow: 0px 7px 4px -3px rgb(240 240 240);
  -moz-box-shadow: 0px 7px 4px -3px rgba(240 240 240);
  box-shadow: 0px 7px 4px -3px rgb(240 240 240);">
    <div class="container video mb-3" id="video-container">
      <iframe src="https://www.youtube.com/embed/VwWP8wX8BwQ" id="embedded-video" title="YouTube video player"
        frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen></iframe>
    </div>

    <div>
      <form method="POST" action="/quiz" class="d-flex flex-row justify-content-between align-items-end gap-3">
        <div class="w-100">
          <input type="text" id="allWordsForQuiz" name="allWordsForQuiz" value="">
          <label for="topic"><b>Lesson</b></label>
          <select id="topicSelector" name="topic" class="form-select">
            <option value="Panahon">Panahon</option>
            <option value="Pagbati">Pagbati</option>
            <option value="Bilang">Bilang</option>
            <option value="Pamilya">Pamilya</option>
          </select>
        </div>
        <button id="showQuizBtn" type="submit" class="btn btn-primary rounded-pill d-flex gap-2" href="#">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem;">
            <!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
            <path
              d="M184 0c30.9 0 56 25.1 56 56V456c0 30.9-25.1 56-56 56c-28.9 0-52.7-21.9-55.7-50.1c-5.2 1.4-10.7 2.1-16.3 2.1c-35.3 0-64-28.7-64-64c0-7.4 1.3-14.6 3.6-21.2C21.4 367.4 0 338.2 0 304c0-31.9 18.7-59.5 45.8-72.3C37.1 220.8 32 207 32 192c0-30.7 21.6-56.3 50.4-62.6C80.8 123.9 80 118 80 112c0-29.9 20.6-55.1 48.3-62.1C131.3 21.9 155.1 0 184 0zM328 0c28.9 0 52.6 21.9 55.7 49.9c27.8 7 48.3 32.1 48.3 62.1c0 6-.8 11.9-2.4 17.4c28.8 6.2 50.4 31.9 50.4 62.6c0 15-5.1 28.8-13.8 39.7C493.3 244.5 512 272.1 512 304c0 34.2-21.4 63.4-51.6 74.8c2.3 6.6 3.6 13.8 3.6 21.2c0 35.3-28.7 64-64 64c-5.6 0-11.1-.7-16.3-2.1c-3 28.2-26.8 50.1-55.7 50.1c-30.9 0-56-25.1-56-56V56c0-30.9 25.1-56 56-56z" />
          </svg>
          <span>Quiz</span>
        </button>
      </form>
    </div>
  </div>
  <table id="topicsList" class="table mt-2">
    <tbody>
      <tr>
        <td>Bilang</td>
        <td>1</td>
      </tr>
      <tr>
        <td>Pamilya</td>
        <td>pamilya</td>
      </tr>
      <tr>
        <td>Pamilya</td>
        <td>mama</td>
      </tr>
      <tr>
        <td>Pagbati</td>
        <td>Hello</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>ngayon</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>gabi</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>walang hanggan</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>magpakailanman</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>hinaharap</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>kasalukuyan</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>kahapon</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>bukas</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>ngayong araw</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>araw-araw</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>madalas</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>kamakailan</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>mamaya</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>huli na</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>maaga</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>malapit na</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>paglubog ng araw</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>pagsikat ng araw</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>tanghali</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>hapon</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>minsan</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>dalawang beses</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>tatlong beses</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>segundo</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>minuto</td>
      </tr>
      <tr>
        <td>Panahon</td>
        <td>oras</td>
      </tr>
    </tbody>
  </table>

</div>

<script>
  $(document).ready(function () {
    $('nav.fixed-bottom li:nth-child(1) a, nav.fixed-bottom li:nth-child(1) a svg path').addClass('active');

    function filterTopicsList() {
      $("#topicsList td:nth-child(1):contains('" + $("#topicSelector").val() + "')").parent().show();
      $("#topicsList td:nth-child(1):not(:contains('" + $("#topicSelector").val() + "'))").parent().hide();
      let words = [];
      $('#topicsList tr:visible td:nth-child(2)').each(function(i, obj) {
        words.push($(this).html());
      });
      $('#allWordsForQuiz').val(words.join(','));
    }
    $('#topicSelector').change(function () {
      filterTopicsList();
    });

    filterTopicsList();

    // Filter lesson when user selects from the search results
    $("#searchWordsList tr").on("click", function () {
      var tr = $(this);
      $("#topicSelector").val(tr.find("td:nth-child(1)").html());
      filterTopicsList();
      window.scrollTo(0, 0);

      // Hide search
      $('#topNav').removeClass('d-none').addClass('d-flex');
      $('#search').removeClass('d-flex').addClass('d-none');
      $('#search-results').hide();
      $('#overlay').hide();
    });

    $("#showQuizBtn2").on("click", function () {
      $.ajax({
        type: "POST",
        url: "/quiz",
        data: JSON.stringify({ "topic": $('#topicSelector').val() }),
        contentType: "application/json",
        dataType: 'json',
        success: function (result) {
          console.log(typeof $('#topicsList tr:visible td:nth-child(2)'));
          console.log("Text" + $('#topicsList tr:visible td:nth-child(2)'));
          localStorage.setItem("FSL_Quiz_Topic", result);
          window.location.href = "/quiz";
        }
      });
    });
  });
</script>
{% endblock %}